(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{1:function(t,a,e){"use strict";function i(t,a,e,i,s,r,o,n){var l,c="function"==typeof t?t.options:t;if(a&&(c.render=a,c.staticRenderFns=e,c._compiled=!0),i&&(c.functional=!0),r&&(c._scopeId="data-v-"+r),o?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},c._ssrRegister=l):s&&(l=n?function(){s.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:s),l)if(c.functional){c._injectStyles=l;var d=c.render;c.render=function(t,a){return l.call(a),d(t,a)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,l):[l]}return{exports:t,options:c}}e.d(a,"a",(function(){return i}))},2:function(t,a,e){"use strict";var i={props:{title:{type:String,required:!0,default:""}}},s=e(1),r=Object(s.a)(i,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"content-header"},[e("div",{staticClass:"row mb-2"},[e("div",{staticClass:"col-sm-6"},[e("h1",{staticClass:"m-0 text-dark"},[t._v(t._s(t.title))])]),t._v(" "),e("div",{staticClass:"col-sm-6"},[e("ol",{staticClass:"breadcrumb float-sm-right"},[t._m(0),t._v(" "),e("li",{staticClass:"breadcrumb-item active"},[t._v(t._s(t.title))])])])])])}),[function(){var t=this.$createElement,a=this._self._c||t;return a("li",{staticClass:"breadcrumb-item"},[a("a",{attrs:{href:"#"}},[this._v("Home")])])}],!1,null,null,null);a.a=r.exports},58:function(t,a,e){"use strict";e.r(a);var i=e(2),s=e(5),r={props:{items:{type:Array,required:!0},fields:{type:Array,required:!0},meta:{type:Object,required:!0},isDetail:{type:String,required:!1,default:void 0}},data:function(){return{sortBy:null,sortDesc:!1,selectedTrans:null}},watch:{sortBy:function(){this.$emit("sort",{sortBy:this.sortBy,sortDesc:this.sortDesc})},sortDesc:function(){this.$emit("sort",{sortBy:this.sortBy,sortDesc:this.sortDesc})}},methods:{loadPerPage:function(){this.$emit("per_page",this.meta.per_page)},changePage:function(t){this.$emit("pagination",t)},edit:function(t,a,e){this.$emit("selected",t)},search:e.n(s).a.debounce((function(t){this.$emit("search",t.target.value)}),500)}},o=e(1),n=Object(o.a)(r,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-4 mb-2"},[e("div",{staticClass:"form-inline"},[e("label",{staticClass:"mr-2"},[t._v("Showing")]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.meta.per_page,expression:"meta.per_page"}],staticClass:"form-control",on:{change:[function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.meta,"per_page",a.target.multiple?e:e[0])},t.loadPerPage]}},[e("option",{attrs:{value:"10"}},[t._v("10")]),t._v(" "),e("option",{attrs:{value:"25"}},[t._v("25")]),t._v(" "),e("option",{attrs:{value:"50"}},[t._v("50")]),t._v(" "),e("option",{attrs:{value:"100"}},[t._v("100")])]),t._v(" "),e("label",{staticClass:"ml-2"},[t._v("Entries")])])]),t._v(" "),e("div",{staticClass:"col-md-4 offset-md-4"},[e("div",{staticClass:"form-inline float-right"},[e("label",{staticClass:"mr-2"},[t._v("Search")]),t._v(" "),e("input",{staticClass:"form-control",attrs:{type:"text"},on:{input:t.search}})])]),t._v(" "),e("div",{staticClass:"col-md-12"},[e("b-table",{attrs:{striped:"",hover:"",items:t.items,fields:t.fields,"sort-by":t.sortBy,"sort-desc":t.sortDesc,"show-empty":""},on:{"update:sortBy":function(a){t.sortBy=a},"update:sort-by":function(a){t.sortBy=a},"update:sortDesc":function(a){t.sortDesc=a},"update:sort-desc":function(a){t.sortDesc=a}},scopedSlots:t._u([{key:"cell(role)",fn:function(a){return[e("b-badge",{staticClass:"mx-1"},[t._v("\n          "+t._s(a.value)+"\n        ")])]}},{key:"cell(aktif)",fn:function(a){return[0===a.value?e("b-badge",{staticClass:"mx-1"},[t._v("\n          Non-Aktif\n        ")]):e("b-badge",{staticClass:"mx-1",attrs:{variant:"primary"}},[t._v("\n          Aktif\n        ")])]}},{key:"cell(actions)",fn:function(a){return[e("b-button",{staticClass:"mr-1",attrs:{size:"sm",variant:"secondary"},on:{click:function(e){return t.edit(a.item,a.index,e.target)}}},[t._v("\n          Edit\n        ")])]}}])})],1),t._v(" "),e("div",{staticClass:"col-md-6"},[e("p",[t._v("\n      Showing "),e("strong",[t._v(t._s(t.meta.from))]),t._v(" to\n      "),e("strong",[t._v(t._s(t.meta.to))]),t._v(" of\n      "),e("strong",[t._v(t._s(t.meta.total))]),t._v(" items\n    ")])]),t._v(" "),e("div",{staticClass:"col-md-6"},[e("b-pagination",{attrs:{"total-rows":t.meta.total,"per-page":t.meta.per_page,align:"right","aria-controls":"dw-datatable"},on:{change:t.changePage},model:{value:t.meta.current_page,callback:function(a){t.$set(t.meta,"current_page",a)},expression:"meta.current_page"}})],1)])}),[],!1,null,null,null).exports,l={props:{selected:{type:void 0,required:!0,default:void 0}},data:function(){return{aktif:0,role:"Pegawai",statuses:[{text:"NonAktif",value:0},{text:"Aktif",value:1}],roles:[{text:"Kajur",value:"Kajur"},{text:"Bendahara",value:"Bendahara"},{text:"PAJ",value:"PAJ"},{text:"Pegawai",value:"Pegawai"}]}},mounted:function(){this.aktif=this.selected.aktif,this.role=this.selected.role},methods:{edit:function(t){t.preventDefault(),this.$emit("submit",{aktif:this.aktif,role:this.role})}}},c=Object(o.a)(l,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("b-form",{attrs:{id:"form-pegawai-edit"},on:{submit:t.edit}},[e("b-form-group",{attrs:{label:"Role"}},[e("b-form-select",{attrs:{options:t.roles},model:{value:t.role,callback:function(a){t.role=a},expression:"role"}})],1),t._v(" "),e("b-form-group",{attrs:{label:"Status"}},[e("b-form-radio-group",{attrs:{options:t.statuses,name:"radio-inline"},model:{value:t.aktif,callback:function(a){t.aktif=a},expression:"aktif"}}),t._v(" "),e("b-button",{attrs:{variant:"secondary"},on:{click:function(a){return t.$bvModal.hide("modal-pegawai")}}},[t._v("Batal")]),t._v(" "),e("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Edit")])],1)],1)}),[],!1,null,null,null).exports,d={data:function(){return{dataPegawai:{npk:"",nama:"",email:"",role:"Pegawai",password:"12345",aktif:0},dataRole:[{text:"Kajur",value:"Kajur"},{text:"Bendahara",value:"Bendahara"},{text:"PAJ",value:"PAJ"},{text:"Pegawai",value:"Pegawai"}]}},methods:{tambah:function(t){t.preventDefault(),this.$emit("submit",this.dataPegawai)}}},u=Object(o.a)(d,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("b-form",{attrs:{id:"form-tambah-pegawai"},on:{submit:t.tambah}},[e("b-form-group",{attrs:{id:"npk-group",label:"NPK","label-for":"npk"}},[e("b-form-input",{attrs:{id:"npk",type:"text",required:"",placeholder:"NPK"},model:{value:t.dataPegawai.npk,callback:function(a){t.$set(t.dataPegawai,"npk",a)},expression:"dataPegawai.npk"}})],1),t._v(" "),e("b-form-group",{attrs:{id:"nama-group",label:"Nama","label-for":"nama"}},[e("b-form-input",{attrs:{id:"nama",type:"text",required:"",placeholder:"Nama"},model:{value:t.dataPegawai.nama,callback:function(a){t.$set(t.dataPegawai,"nama",a)},expression:"dataPegawai.nama"}})],1),t._v(" "),e("b-form-group",{attrs:{id:"email-group",label:"Email","label-for":"email"}},[e("b-form-input",{attrs:{id:"email",type:"email",required:"",placeholder:"Email"},model:{value:t.dataPegawai.email,callback:function(a){t.$set(t.dataPegawai,"email",a)},expression:"dataPegawai.email"}})],1),t._v(" "),e("b-form-group",{attrs:{id:"role-group",label:"Role","label-for":"role"}},[e("b-form-select",{attrs:{id:"role",options:t.dataRole,required:""},model:{value:t.dataPegawai.role,callback:function(a){t.$set(t.dataPegawai,"role",a)},expression:"dataPegawai.role"}})],1),t._v(" "),e("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Tambah")])],1)}),[],!1,null,null,null).exports,m={components:{CHeader:i.a,DataTable:n,FormEdit:c,FormTambah:u},data:function(){return{user:{},columns:[{key:"id",sortable:!0,label:"NPK"},{key:"name",sortable:!1,label:"Nama"},{key:"role",sortable:!0},{key:"aktif",sortable:!0,label:"Status"},{key:"actions",label:"Aksi",sortable:!1}],pegawais:[],modal:{open:!1,selected:void 0,tipe:"Add"},meta:{},current_page:1,per_page:10,search:"",sortBy:"tanggal",sortByDesc:!1}},mounted:function(){var t=this;window.axios.get("/user").then((function(a){t.user=a.data})),this.loadData()},methods:{loadData:function(){var t=this,a=""==this.search?this.current_page:1;window.axios.get("/pegawai",{params:{page:a,per_page:this.per_page,q:this.search}}).then((function(a){var e=a.data.data;t.pegawais=e.data,t.meta={total:e.total,current_page:e.current_page,per_page:e.per_page,from:e.from,to:e.to}}))},open:function(t){this.modal.open=!0,this.modal.tipe=t,"Tambah"===t&&(this.modal.selected=void 0),this.$bvModal.show("modal-pegawai")},action:function(){"Edit"===this.modal.tipe?this.edit():"Tambah"===this.modal.tipe&&this.tambah()},tambah:function(t){window.axios.post("/pegawai",t).then((function(t){}))},edit:function(t){var a=this;window.axios.put("/pegawai/".concat(this.modal.selected.id),{aktif:t.aktif,role:t.role}).then((function(t){200===t.status&&(a.loadData(),a.$bvModal.hide("modal-pegawai"))}))},handleSelected:function(t){this.modal.selected=t,this.open("Edit")},handleStatus:function(t){this.aktif=t},handlePerPage:function(t){this.per_page=t,this.loadData()},handlePagination:function(t){this.current_page=t,this.loadData()},handleSearch:function(t){this.search=t,this.loadData()},handleSort:function(t){this.sortBy=t.sortBy,this.sortByDesc=t.sortDesc}}},p=Object(o.a)(m,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"no"},[e("CHeader",{attrs:{title:t.$route.name}}),t._v(" "),e("div",{staticClass:"bg-white rounded shadow p-2"},[e("div",{staticClass:"row"},[t._m(0),t._v(" "),"Kajur"===t.user.role?e("div",{staticClass:"col-2 pb-4"},[e("button",{staticClass:"btn btn-block btn-primary",on:{click:function(a){return t.open("Tambah")}}},[t._v("\n          Tambah Pegawai\n        ")])]):t._e()]),t._v(" "),e("DataTable",{attrs:{fields:t.columns,items:t.pegawais,meta:t.meta},on:{selected:t.handleSelected,per_page:t.handlePerPage,pagination:t.handlePagination,search:t.handleSearch,sort:t.handleSort}})],1),t._v(" "),e("b-modal",{attrs:{id:"modal-pegawai","hide-footer":!0,title:t.modal.tipe+" Pegawai"}},["Edit"===t.modal.tipe?[e("FormEdit",{attrs:{selected:t.modal.selected},on:{submit:t.edit}})]:[e("FormTambah",{on:{submit:t.tambah}})]],2)],1)}),[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"col-10"},[a("h4",{staticClass:"ml-2 mt-2"},[this._v("List Pegawai")])])}],!1,null,null,null);a.default=p.exports}}]);