(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{1:function(t,a,e){"use strict";function s(t,a,e,s,i,n,r,o){var l,d="function"==typeof t?t.options:t;if(a&&(d.render=a,d.staticRenderFns=e,d._compiled=!0),s&&(d.functional=!0),n&&(d._scopeId="data-v-"+n),r?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},d._ssrRegister=l):i&&(l=o?function(){i.call(this,(d.functional?this.parent:this).$root.$options.shadowRoot)}:i),l)if(d.functional){d._injectStyles=l;var c=d.render;d.render=function(t,a){return l.call(a),c(t,a)}}else{var u=d.beforeCreate;d.beforeCreate=u?[].concat(u,l):[l]}return{exports:t,options:d}}e.d(a,"a",(function(){return s}))},2:function(t,a,e){"use strict";var s={props:{title:{type:String,required:!0,default:""}}},i=e(1),n=Object(i.a)(s,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"content-header"},[e("div",{staticClass:"row mb-2"},[e("div",{staticClass:"col-sm-6"},[e("h1",{staticClass:"m-0 text-dark"},[t._v(t._s(t.title))])]),t._v(" "),e("div",{staticClass:"col-sm-6"},[e("ol",{staticClass:"breadcrumb float-sm-right"},[t._m(0),t._v(" "),e("li",{staticClass:"breadcrumb-item active"},[t._v(t._s(t.title))])])])])])}),[function(){var t=this.$createElement,a=this._self._c||t;return a("li",{staticClass:"breadcrumb-item"},[a("a",{attrs:{href:"#"}},[this._v("Home")])])}],!1,null,null,null);a.a=n.exports},61:function(t,a,e){"use strict";e.r(a);var s=e(2),i=e(5),n=e.n(i),r={props:{aktivitas:{type:Object,required:!1,default:void 0},tipe:{type:String,required:!0,default:"Tambah"},idModal:{type:String,required:!0,default:"modalTambah"}},data:function(){return{dataAktivitas:{id:0,keterangan:"",pic:""},context:null}},methods:{onContext:function(t){this.context=t},validate:function(){var t=[];return this.dataAktivitas.keterangan?this.dataAktivitas.pic||t.push("Pilih minimal 1 PIC"):t.push("Keterangan tidak boleh kosong"),t},toast:function(t,a){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"success";this.$bvToast.toast(a,{title:t,variant:e,autoHideDelay:2500})},save:function(){var t=this,a=this.validate();if(0!=a.length)return this.toast(a);"Tambah"==this.tipe?window.axios.post("/aktivitas",this.dataAktivitas).then((function(a){return 200===a.status?(t.$parent.loadData(),t.$refs.closeModal.click(),t.toast("Aktivitas","Berhasil menambah aktivitas")):t.toast("Aktivitas","Gagal menambah aktivitas","danger")})):"Edit"===this.tipe&&window.axios.put("/aktivitas/".concat(this.dataAktivitas.id),this.dataAktivitas).then((function(a){return 200===a.status?(t.$parent.$parent.loadData(),t.$refs.closeModal.click(),t.toast("Aktivitas","Berhasil mengubah aktivitas")):t.toast("Aktivitas","Gagal mengubah aktivitas","danger")}))}}},o=e(1),l=Object(o.a)(r,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"modal fade",attrs:{id:t.idModal,tabindex:"-1",role:"dialog","aria-labelledby":t.idModal,"aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title"},[t._v(t._s(t.tipe)+" Aktivitas")]),t._v(" "),t._m(0)]),t._v(" "),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"keterangan"}},[t._v("Keterangan")]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.dataAktivitas.keterangan,expression:"dataAktivitas.keterangan"}],staticClass:"form-control",attrs:{id:"keterangan",rows:"2"},domProps:{value:t.dataAktivitas.keterangan},on:{input:function(a){a.target.composing||t.$set(t.dataAktivitas,"keterangan",a.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"nominal"}},[t._v("PIC")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.dataAktivitas.pic,expression:"dataAktivitas.pic"}],staticClass:"form-control",attrs:{id:"nominal",type:"text",name:"nominal"},domProps:{value:t.dataAktivitas.pic},on:{input:function(a){a.target.composing||t.$set(t.dataAktivitas,"pic",a.target.value)}}})])]),t._v(" "),e("div",{staticClass:"modal-footer"},[e("button",{ref:"closeModal",staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("\n            Tutup\n          ")]),t._v(" "),e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.save}},[t._v(t._s(t.tipe))])])])])])])}),[function(){var t=this.$createElement,a=this._self._c||t;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[this._v("Ã—")])])}],!1,null,null,null).exports,d={components:{CModal:l},props:{items:{type:Array,required:!0},fields:{type:Array,required:!0},meta:{type:Object,required:!0}},data:function(){return{sortBy:null,sortDesc:!1,selectedAktivitas:null}},watch:{sortBy:function(){this.$emit("sort",{sortBy:this.sortBy,sortDesc:this.sortDesc})},sortDesc:function(){this.$emit("sort",{sortBy:this.sortBy,sortDesc:this.sortDesc})}},methods:{loadPerPage:function(){this.$emit("per_page",this.meta.per_page)},changePage:function(t){this.$emit("pagination",t)},toast:function(t,a){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"success";this.$bvToast.toast(a,{title:t,variant:e,autoHideDelay:2500})},detail:function(t){this.$router.push({name:"Detail Aktivitas",params:{id:t}})},edit:function(t,a,e){this.selectedAktivitas=this.items.find((function(a){return a.id===t.id}));var s=this.selectedAktivitas;this.$refs.modalEdit.$data.dataAktivitas.id=s.id,this.$refs.modalEdit.$data.dataAktivitas.pic=s.pic,this.$refs.modalEdit.$data.dataAktivitas.keterangan=s.keterangan},hapus:function(t,a,e){var s=this,i=this.items.findIndex((function(a){return a.id===t.id}));this.$bvModal.msgBoxConfirm("Apakah anda yakin menghapus transaksi ini?",{title:"Peringatan",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"Hapus",cancelTitle:"Batal",footerClass:"p-2",hideHeaderClose:!1,centered:!0}).then((function(a){a&&window.axios.delete("/aktivitas/".concat(t.id)).then((function(t){200===t.status?(s.items.splice(i,1),s.toast("Aktivitas","Berhasil menghapus aktivitas")):s.toast("Aktivitas","Gagal menghapus aktivitas","danger")}))})).catch((function(t){alert(t)}))},search:n.a.debounce((function(t){this.$emit("search",t.target.value)}),500)}},c=Object(o.a)(d,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-4 mb-2"},[e("div",{staticClass:"form-inline"},[e("label",{staticClass:"mr-2"},[t._v("Showing")]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.meta.per_page,expression:"meta.per_page"}],staticClass:"form-control",on:{change:[function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.meta,"per_page",a.target.multiple?e:e[0])},t.loadPerPage]}},[e("option",{attrs:{value:"10"}},[t._v("10")]),t._v(" "),e("option",{attrs:{value:"25"}},[t._v("25")]),t._v(" "),e("option",{attrs:{value:"50"}},[t._v("50")]),t._v(" "),e("option",{attrs:{value:"100"}},[t._v("100")])]),t._v(" "),e("label",{staticClass:"ml-2"},[t._v("Entries")])])]),t._v(" "),e("div",{staticClass:"col-md-4 offset-md-4"},[e("div",{staticClass:"form-inline float-right"},[e("label",{staticClass:"mr-2"},[t._v("Search")]),t._v(" "),e("input",{staticClass:"form-control",attrs:{type:"text"},on:{input:t.search}})])]),t._v(" "),e("div",{staticClass:"col-md-12"},[e("b-table",{attrs:{striped:"",hover:"",items:t.items,fields:t.fields,"sort-by":t.sortBy,"sort-desc":t.sortDesc,"show-empty":"","no-local-sorting":""},on:{"update:sortBy":function(a){t.sortBy=a},"update:sort-by":function(a){t.sortBy=a},"update:sortDesc":function(a){t.sortDesc=a},"update:sort-desc":function(a){t.sortDesc=a}},scopedSlots:t._u([{key:"cell(total)",fn:function(a){return[t._v(t._s(t._f("rupiah")(a.value)))]}},{key:"cell(actions)",fn:function(a){return[e("b-button",{staticClass:"mr-1",attrs:{size:"sm",variant:"primary"},on:{click:function(e){return t.detail(t.items[a.index].id)}}},[t._v("\n          Detail\n        ")]),t._v(" "),"Bendahara"===t.$parent.$data.user.role?e("b-button",{staticClass:"mr-1",attrs:{"data-toggle":"modal","data-target":"#modalEdit",size:"sm",variant:"secondary"},on:{click:function(e){return t.edit(a.item,a.index,e.target)}}},[t._v("\n          Edit\n        ")]):t._e(),t._v(" "),"Bendahara"===t.$parent.$data.user.role&&t.items&&0==t.items[a.index].jumlah?e("b-button",{staticClass:"mx-1",attrs:{size:"sm",variant:"danger"},on:{click:function(e){return t.hapus(a.item,a.index,e.target)}}},[t._v("\n          Hapus\n        ")]):t._e()]}}])})],1),t._v(" "),e("div",{staticClass:"col-md-6"},[e("p",[t._v("\n      Showing "),e("strong",[t._v(t._s(t.meta.from))]),t._v(" to\n      "),e("strong",[t._v(t._s(t.meta.to))]),t._v(" of\n      "),e("strong",[t._v(t._s(t.meta.total))]),t._v(" items\n    ")])]),t._v(" "),e("div",{staticClass:"col-md-6"},[e("b-pagination",{attrs:{"total-rows":t.meta.total,"per-page":t.meta.per_page,align:"right","aria-controls":"dw-datatable"},on:{change:t.changePage},model:{value:t.meta.current_page,callback:function(a){t.$set(t.meta,"current_page",a)},expression:"meta.current_page"}})],1),t._v(" "),e("CModal",{ref:"modalEdit",attrs:{"id-modal":"modalEdit",tipe:"Edit",transaksi:t.selectedAktivitas}})],1)}),[],!1,null,null,null).exports,u={components:{CHeader:s.a,DataTable:c,CModal:l},data:function(){return{user:{},columns:[{key:"keterangan",sortable:!1},{key:"pic",sortable:!0},{key:"total",sortable:!0},{key:"actions",label:"Aksi",sortable:!1}],aktivitas:[],meta:{},current_page:1,per_page:10,search:"",sortBy:"id",sortByDesc:!1}},mounted:function(){this.loadData()},methods:{loadData:function(){var t=this,a=""==this.search?this.current_page:1;window.axios.get("/user").then((function(e){t.user=e.data,window.axios.get("/aktivitas",{params:{page:a,per_page:t.per_page,q:t.search,sortby:t.sortBy,sortbydesc:t.sortByDesc?"DESC":"ASC"}}).then((function(a){var e=a.data.data;t.meta={total:e.total,current_page:e.current_page,per_page:e.per_page,from:e.from,to:e.to},e.data.forEach((function(a){var e=Number(a.total_pemasukan)-Number(a.total_pengeluaran);t.aktivitas.push({id:a.id,keterangan:a.keterangan,pic:a.pic,total:e})}))}))}))},handlePerPage:function(t){this.per_page=t,this.loadData()},handlePagination:function(t){this.current_page=t,this.loadData()},handleSearch:function(t){this.search=t,this.loadData()},handleSort:function(t){this.sortBy=t.sortBy,this.sortByDesc=t.sortDesc,this.loadData()}}},v=Object(o.a)(u,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"no"},[e("CHeader",{attrs:{title:t.$route.name}}),t._v(" "),e("div",{staticClass:"bg-white rounded shadow p-2"},[e("div",{staticClass:"row"},[t._m(0),t._v(" "),"Bendahara"===t.user.role?e("div",{staticClass:"col-2 pb-4"},[e("button",{staticClass:"btn btn-block btn-primary",attrs:{"data-toggle":"modal","data-target":"#modalTambah"}},[t._v("\n          Tambah Aktivitas\n        ")])]):t._e()]),t._v(" "),e("DataTable",{attrs:{fields:t.columns,items:t.aktivitas,meta:t.meta},on:{per_page:t.handlePerPage,pagination:t.handlePagination,search:t.handleSearch,sort:t.handleSort}})],1),t._v(" "),"Bendahara"===t.user.role?e("CModal",{attrs:{"id-modal":"modalTambah",tipe:"Tambah"}}):t._e()],1)}),[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"col-10"},[a("h4",{staticClass:"ml-2 mt-2"},[this._v("List Aktivitas")])])}],!1,null,null,null);a.default=v.exports}}]);